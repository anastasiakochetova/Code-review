name: Generate Files and Update Content


on:
  create:
    branches:
      - '*'

jobs:
  generate-files:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      
      - name: Create new test files
        run: |
          python3 << 'EOF'
          from pathlib import Path
          from datetime import datetime
          
          scripts_dir = Path('scripts')
          
          # –§–∞–π–ª 1: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∑–∞–¥–∞–Ω–∏—è–º
          assignment_docs = """
            # üìö –í–∞–π–±-–ö–æ–¥–∏–Ω–≥ –ó–∞–¥–∞–Ω–∏—è: –ü–æ–ª–Ω–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
            
            ## –û–±–∑–æ—Ä
            
            –ù–∞–±–æ—Ä –∏–∑ 10 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤-–±–∞–∫–∞–ª–∞–≤—Ä–æ–≤ 1 –≥–æ–¥–∞
            –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö (Exploratory Data Analysis).
              
            ## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ 
            - Python 3.8+
            - pandas ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
            - matplotlib/seaborn ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
            - scikit-learn ‚Äî –¥–∞—Ç–∞—Å–µ—Ç—ã
            
            ## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
            ```bash
            pip install pandas numpy matplotlib seaborn scikit-learn datasets
            ```

            ## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

            1. –°—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
            2. –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–∞–π–ª–µ assignment.py
            3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ (PEP8, lint)
            4. –°–æ–∑–¥–∞—ë—Ç Pull Request
            5. –ü–æ—Å–ª–µ merge –≤–µ—Ç–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è
            ---
            –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
            """
          
          with open(scripts_dir / 'ASSIGNMENTS_README.md', 'w') as f:
              f.write(assignment_docs)
          print("‚úì –°–æ–∑–¥–∞–Ω ASSIGNMENTS_README.md")
          
          # –§–∞–π–ª 2: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–¥—É
          requirements = """# üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ö–æ–¥—É
          
            ## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏
            –ö–∞–∂–¥—ã–π assignment.py –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

            ### 1. load_data()
            ```python
            def load_data():
                    \"\"\"–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DataFrame\"\"\"
                        pass
            ```
            –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å:
                - DataFrame —Å –¥–∞–Ω–Ω—ã–º–∏
                - –¶–µ–ª–µ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ–ª–æ–Ω–∫–µ
                - –ë–µ–∑ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
                
            ### 2. target_analysis()
            ```python
            def target_analysis(df):
                    \"\"\"–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ü–µ–ª–µ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é\"\"\"
                        pass
            ```

            –î–æ–ª–∂–Ω–∞:
            - –í—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
            - –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
            - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏

            ### 3. feature_statistics()
            ```python
            def feature_statistics(df):
                \"\"\"–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤\"\"\"
                pass
            ```

            ### 4. visualize_target()
            ```python
            def visualize_target(df):
                \"\"\"–°–æ–∑–¥–∞—ë—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π\"\"\"
                pass
            ```

            –î–æ–ª–∂–Ω–∞:
            - –°–æ–∑–¥–∞—Ç—å PNG —Ñ–∞–π–ª
            - –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: NN_dataset_target_distribution.png

            ### 5. visualize_features()
            ```python
            def visualize_features(df):
                \"\"\"–°–æ–∑–¥–∞—ë—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏–∑–Ω–∞–∫–æ–≤\"\"\"
                pass
            ```

            ## –°—Ç–∏–ª—å –ö–æ–¥–∞

            - PEP8 compliance
            - Max 120 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å—Ç—Ä–æ–∫—É
            - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (4 –ø—Ä–æ–±–µ–ª–∞)
            - Docstrings –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π

            ---

            –í–µ—Ä—Å–∏—è: 1.0
            """
          
          with open(scripts_dir / 'CODE_REQUIREMENTS.md', 'w') as f:
              f.write(requirements)
          print("‚úì –°–æ–∑–¥–∞–Ω CODE_REQUIREMENTS.md")
          
          # –§–∞–π–ª 3: –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ pandas
          pandas_cheatsheet = """# üêº Pandas –®–ø–∞—Ä–≥–∞–ª–∫–∞

            ## –û—Å–Ω–æ–≤–Ω—ã–µ –û–ø–µ—Ä–∞—Ü–∏–∏

            ### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
            ```python
            import pandas as pd
            from sklearn.datasets import load_iris

            # –ò–∑ sklearn –¥–∞—Ç–∞—Å–µ—Ç–∞
            iris = load_iris()
            X = pd.DataFrame(iris.data, columns=iris.feature_names)
            y = pd.Series(iris.target, name='target')
            df = pd.concat([X, y], axis=1)
            ```

            ### –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            ```python
            df.shape          # (150, 5)
            df.columns        # Index(['sepal length (cm)', ...])
            df.dtypes         # –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
            df.head()         # –ü–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫
            df.describe()     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            df.info()         # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            ```

            ### –†–∞–±–æ—Ç–∞ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏
            ```python
            df['target']           # –û–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞
            df[['col1', 'col2']]  # –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫
            df.iloc[:, -1]        # –ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–ª–æ–Ω–∫–∞
            df.iloc[:, :-1]       # –í—Å–µ –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π
            ```

            ### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
            ```python
            df[df['age'] > 20]
            df[(df['age'] > 20) & (df['city'] == 'NYC')]
            df[df['name'].isin(['Alice', 'Bob'])]
            ```

            ### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            ```python
            df['age'].mean()
            df['age'].std()
            df['age'].min()
            df['age'].max()
            df['category'].value_counts()
            df.groupby('category')['age'].mean()
            ```

            ### –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            ```python
            df.isnull().sum()     # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤
            df.dropna()           # –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏
            df.fillna(0)          # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ–º
            ```

            ---

            –î–∞—Ç–∞: {datetime.now().strftime('%Y-%m-%d')}
            """
          
          with open(scripts_dir / 'PANDAS_CHEATSHEET.md', 'w') as f:
              f.write(pandas_cheatsheet)
          print("‚úì –°–æ–∑–¥–∞–Ω PANDAS_CHEATSHEET.md")
          
          # –§–∞–π–ª 4: –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
          viz_cheatsheet = """# üìä Matplotlib –®–ø–∞—Ä–≥–∞–ª–∫–∞

            ## –û—Å–Ω–æ–≤–Ω—ã–µ –ì—Ä–∞—Ñ–∏–∫–∏

            ### –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞
            ```python
            import matplotlib.pyplot as plt

            plt.hist(data, bins=30, edgecolor='black')
            plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ')
            plt.ylabel('–ß–∞—Å—Ç–æ—Ç–∞')
            plt.title('–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ')
            plt.savefig('histogram.png')
            ```

            ### Boxplot
            ```python
            plt.figure(figsize=(10, 5))
            df.boxplot(column='value', by='category')
            plt.savefig('boxplot.png')
            ```

            ### Scatter
            ```python
            plt.scatter(df['x'], df['y'], alpha=0.5)
            plt.xlabel('X')
            plt.ylabel('Y')
            plt.savefig('scatter.png')
            ```

            ### Bar Chart
            ```python
            df['category'].value_counts().plot(kind='bar')
            plt.tight_layout()
            plt.savefig('bar_chart.png')
            ```

            ## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

            ```python
            plt.figure(figsize=(10, 5))           # –†–∞–∑–º–µ—Ä
            plt.title('Title', fontsize=14)       # –ó–∞–≥–æ–ª–æ–≤–æ–∫
            plt.xlabel('X Label')                 # –û—Å—å X
            plt.ylabel('Y Label')                 # –û—Å—å Y
            plt.grid(True, alpha=0.3)            # –°–µ—Ç–∫–∞
            plt.savefig('plot.png', dpi=100)     # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            plt.show()                            # –ü–æ–∫–∞–∑–∞—Ç—å
            ```

            ---

            –î–∞—Ç–∞: {datetime.now().strftime('%Y-%m-%d')}
            """
          
          with open(scripts_dir / 'MATPLOTLIB_CHEATSHEET.md', 'w') as f:
              f.write(viz_cheatsheet)
          print("‚úì –°–æ–∑–¥–∞–Ω MATPLOTLIB_CHEATSHEET.md")
          
          EOF
      
      - name: Update existing files with timestamps
        run: |
          python3 << 'EOF'
          from pathlib import Path
          from datetime import datetime
          
          scripts_dir = Path('scripts')
          current_time = datetime.now().strftime('%Y-%m-%d %H:%M:%S')
          
          # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ *_template.py —Ñ–∞–π–ª—ã
          for file in sorted(scripts_dir.glob('*_template.py')):
              with open(file, 'a') as f:
                  f.write(f"\n# –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: {current_time}\n")
              print(f"‚úì –û–±–Ω–æ–≤–ª—ë–Ω {file.name}")
          
          EOF
      
      - name: Create summary file
        run: |
          python3 << 'EOF'
          from datetime import datetime
          
          summary = f"""# üìù –û—Ç—á—ë—Ç –æ–± –û–±–Ω–æ–≤–ª–µ–Ω–∏–∏

            ## üÜï –ù–æ–≤—ã–µ –§–∞–π–ª—ã

            ‚úÖ ASSIGNMENTS_README.md
            - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∑–∞–¥–∞–Ω–∏—è–º
            - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
            - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

            ‚úÖ CODE_REQUIREMENTS.md
            - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
            - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–¥—É
            - –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã PEP8

            ‚úÖ PANDAS_CHEATSHEET.md
            - –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ pandas
            - –ü—Ä–∏–º–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π
            - Tip–∏ —Ç—Ä—é–∫–∏

            ‚úÖ MATPLOTLIB_CHEATSHEET.md
            - –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
            - –ü—Ä–∏–º–µ—Ä—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤
            - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

            ## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω—ã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –§–∞–π–ª—ã
            ‚úÖ –í—Å–µ *_full_analysis.py —Ñ–∞–π–ª—ã
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
            - –ù–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            - –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

            ## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

            - –ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤: 4
            - –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 10
            - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

            ## ‚úÖ –°—Ç–∞—Ç—É—Å

            –í—Å–µ —Ñ–∞–π–ª—ã —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã

            ---

            –î–∞—Ç–∞: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
            """
                
          with open('FILE_UPDATE_REPORT.md', 'w') as f:
              f.write(summary)
          
          print(summary)
          
          EOF
      
      - name: Commit and push changes
        run: |
          git config --local user.email "github-actions@github.com"
          git config --local user.name "GitHub Actions"
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
          if [ -n "$(git status --porcelain)" ]; then
            git pull
            git add scripts/
            git add FILE_UPDATE_REPORT.md
            git commit -m "üîÑ Auto-generate documentation and update files

            - Added ASSIGNMENTS_README.md
            - Added CODE_REQUIREMENTS.md
            - Added PANDAS_CHEATSHEET.md
            - Added MATPLOTLIB_CHEATSHEET.md
            - Updated all _full_analysis.py files with timestamps"
            git push origin HEAD:${{ github.ref }}
          else
            echo "No changes to commit"
          fi
      
      - name: Upload report
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: file-update-report
          path: FILE_UPDATE_REPORT.md
      
      - name: Summary
        run: |
          echo "‚úÖ Workflow –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ"
          echo "üìÅ –°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞"
          echo "üìù –û–±–Ω–æ–≤–ª–µ–Ω–æ 10 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤"
          echo "üìä –û—Ç—á—ë—Ç: FILE_UPDATE_REPORT.md"
